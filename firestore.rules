rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {

    // âœ… ëª¨ì§‘ ê³µê³  (jobs) ì»¬ë ‰ì…˜ ê¶Œí•œ ì„¤ì •
    match /jobs/{jobId} {
      allow read: if true; // ğŸ”¥ ëª¨ë“  ì‚¬ìš©ì ì½ê¸° ê°€ëŠ¥
      allow create: if request.auth != null; // ğŸ”¥ ë¡œê·¸ì¸í•œ ì‚¬ìš©ìë§Œ ìƒì„± ê°€ëŠ¥
      allow delete, update: if request.auth != null && request.auth.token.role == "admin";
    }

    // âœ… ì§€ì› ë°ì´í„° (applications) ë¡œê·¸ì¸í•œ ì‚¬ìš©ìë§Œ ì ‘ê·¼ ê°€ëŠ¥
    match /applications/{applicationId} {
      allow read, write: if request.auth != null;
    }

    // âœ… ì‚¬ìš©ì ë°ì´í„°ëŠ” ë³¸ì¸ë§Œ ì ‘ê·¼ ê°€ëŠ¥
    match /users/{userId} {
      allow read, write: if request.auth != null && request.auth.uid == userId;
    }

    // âœ… ê´€ë¦¬ì ë°ì´í„° ì ‘ê·¼ ì œí•œ (ê´€ë¦¬ì ë³¸ì¸ë§Œ ê°€ëŠ¥)
    match /admins/{adminId} {
      allow read, write: if request.auth != null && request.auth.token.role == "admin";
    }
  }
}
